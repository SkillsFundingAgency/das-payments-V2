<?xml version="1.0" encoding="utf-8"?>
<ApplicationManifest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="SFA.DAS.Payments.Monitoring.ServiceFabricType" ApplicationTypeVersion="1.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">
  <Parameters>
    <Parameter Name="JobService_MinReplicaSetSize" DefaultValue="1" />
    <Parameter Name="JobService_PartitionCount" DefaultValue="1" />
    <Parameter Name="JobService_TargetReplicaSetSize" DefaultValue="1" />
    <Parameter Name="JobsProxyService_InstanceCount" DefaultValue="-1" />
    <Parameter Name="Monitoring_JobsService_InstanceCount" DefaultValue="-1" />
    <Parameter Name="Monitoring_JobsStatusService_InstanceCount" DefaultValue="1" />
    <Parameter Name="StorageConnectionString" DefaultValue="" />
    <Parameter Name="ServiceBusConnectionString" DefaultValue="" />
    <Parameter Name="LoggingConnectionString" DefaultValue="" />
    <Parameter Name="PaymentsConnectionString" DefaultValue="" />
    <Parameter Name="PaymentsMonitoringConnectionString" DefaultValue="" />
    <Parameter Name="Monitoring_JobsService_EndpointName" DefaultValue="" />
    <Parameter Name="Monitoring_JobsService_FailedMessagesQueue" DefaultValue="" />
    <Parameter Name="Monitoring_JobsService_FailureTimeoutInSeconds" DefaultValue="150" />
    <Parameter Name="Monitoring_JobsService_IntervalInSeconds" DefaultValue="10" />
    <Parameter Name="NumberOfNServiceBusThreads" DefaultValue="4" />
    <Parameter Name="ApplicationInsightsInstrumentationKey" DefaultValue="" />
    <Parameter Name="LogLevel" DefaultValue="Information" />
    <Parameter Name="ConsoleLogLevel" DefaultValue="" />
    <Parameter Name="DelayedRetryTimeInSeconds" DefaultValue="5" />
    <Parameter Name="Placement_Constraints" DefaultValue="" />
    <Parameter Name="JobStatusCheck_Interval" DefaultValue="00:00:10" />
    <Parameter Name="TimeToWaitForJobToComplete" DefaultValue="01:00:00" />
    <Parameter Name="DasNServiceBusLicenseKey" DefaultValue="" />
  </Parameters>
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="SFA.DAS.Payments.Monitoring.Jobs.JobServicePkg" ServiceManifestVersion="1.0.0" />
    <ConfigOverrides>
      <ConfigOverride Name="Config">
        <Settings>
          <Section Name="ConnectionStringsSection">
            <Parameter Name="StorageConnectionString" Value="[StorageConnectionString]" />
            <Parameter Name="ServiceBusConnectionString" Value="[ServiceBusConnectionString]" />
            <Parameter Name="LoggingConnectionString" Value="[LoggingConnectionString]" />
            <Parameter Name="PaymentsConnectionString" Value="[PaymentsConnectionString]" />
            <Parameter Name="PaymentsMonitoringConnectionString" Value="[PaymentsMonitoringConnectionString]" />
          </Section>
          <Section Name="Settings">
            <Parameter Name="EndpointName" Value="[Monitoring_JobsService_EndpointName]" />
            <Parameter Name="FailedMessagesQueue" Value="[Monitoring_JobsService_FailedMessagesQueue]" />
            <Parameter Name="ApplicationInsightsInstrumentationKey" Value="[ApplicationInsightsInstrumentationKey]" />
            <Parameter Name="DelayedRetryTimeInSeconds" Value="[DelayedRetryTimeInSeconds]" />
            <Parameter Name="LogLevel" Value="[LogLevel]" />
            <Parameter Name="ConsoleLogLevel" Value="[ConsoleLogLevel]" />
            <Parameter Name="JobStatusCheck_Interval" Value="[JobStatusCheck_Interval]" />
            <Parameter Name="TimeToWaitForJobToComplete" Value="[TimeToWaitForJobToComplete]" />
            <Parameter Name="NumberOfNServiceBusThreads" Value="4" />
            <Parameter Name="DasNServiceBusLicenseKey" Value="[DasNServiceBusLicenseKey]" />
          </Section>
        </Settings>
      </ConfigOverride>
    </ConfigOverrides>
  </ServiceManifestImport>
  <DefaultServices>
    <Service Name="SFA.DAS.Payments.Monitoring.Jobs.JobService" ServicePackageActivationMode="ExclusiveProcess">
      <StatefulService ServiceTypeName="SFA.DAS.Payments.Monitoring.Jobs.JobServiceType" TargetReplicaSetSize="[JobService_TargetReplicaSetSize]" MinReplicaSetSize="[JobService_MinReplicaSetSize]">
        <NamedPartition>
          <Partition Name="0" />
          <Partition Name="1" />
          <Partition Name="2" />
          <Partition Name="3" />
          <Partition Name="4" />
          <Partition Name="5" />
          <Partition Name="6" />
          <Partition Name="7" />
          <Partition Name="8" />
          <Partition Name="9" />
          <Partition Name="10" />
          <Partition Name="11" />
          <Partition Name="12" />
          <Partition Name="13" />
          <Partition Name="14" />
          <Partition Name="15" />
          <Partition Name="16" />
          <Partition Name="17" />
          <Partition Name="18" />
          <Partition Name="19" />
          <Partition Name="10003915" />
          <Partition Name="10033440" />
          <Partition Name="10003161" />
          <Partition Name="10012467" />
          <Partition Name="10000446" />
          <Partition Name="10003375" />
          <Partition Name="10034309" />
          <Partition Name="10036431" />
          <Partition Name="10001436" />
          <Partition Name="10000494" />
          <Partition Name="10036952" />
          <Partition Name="10033438" />
          <Partition Name="10057037" />
          <Partition Name="10027662" />
          <Partition Name="10031241" />
          <Partition Name="10001149" />
          <Partition Name="10023047" />
          <Partition Name="10004977" />
          <Partition Name="10003526" />
          <Partition Name="10005319" />
          <Partition Name="10029952" />
          <Partition Name="10021755" />
          <Partition Name="10046797" />
          <Partition Name="10007924" />
          <Partition Name="10006600" />
        </NamedPartition>
        <PlacementConstraints>[Placement_Constraints]</PlacementConstraints>
      </StatefulService>
    </Service>
  </DefaultServices>
</ApplicationManifest>
